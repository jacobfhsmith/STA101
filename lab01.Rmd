---
title: "Lab 1 - Intro to R and RStudio"
output: 
  html_document:
    highlight: pygments
    theme: cerulean
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, results = "hide")
```

Welcome to Stat 101! This first lab will be focused on getting you familiar with R and RStudio.

## Accessing the Docker Container

R is an open-source statistical language used throughout Statistics. RStudio is a “front end” to R that simplifies important aspects of using R and makes it much easier to work within the R environment.

For this course, Professor Smith has reserved Docker containers with RStudio for your use. Navigate to [Duke VM Manager](https://vm-manage.oit.duke.edu). An RStudio environment should be reserved for you. Click on the *Click here to log in* option - an RStudio pane should open! This is where you will be doing your lab work for this class.

## Getting started with R

There are 2 types of files you will mainly create in this class: R scripts (.R) and R Markdowns (.Rmd). R scripts contain just the code, while R Markdown files can contain text as well as code, and they can be turned into PDFs and other documents with code output. Today, you will create an R script.

Open a new R Script file via *File > New File > R Script*. Write your name, lab section, and date at the top using a comment. To indicate to R that you are writing a comment, not code, use a `#` at the beginning of each line.

R can be used at a fundamental level for doing basic arithmetic. Enter 10 + 5 in your script and click the Run button at the top right of the script editor to send the command to the console, where the output will appear. Alternatively, with the cursor on the line of code, use the keyboard shortcut Ctrl/Cmd + Enter. 

```{r calculator}
# using R as a calculator
10+5
2^4
11 < 12
```

The previous calculations only produce output in the console (the bottom left section of your screen). To save a value, assign it a name by using `=` or the assignment operator `<-`. Entering the name of a value will return the value. For example, run:

```{r saving-values}
# variable creation
x <- 10 + 5
y <- 2^4

# using saved values
x+y

# creating and returning z
z <- x*y
z
```

Take a look at the Environment tab in the top right pane. The values of x, y, and z are displayed. Any created data structures or loaded datasets will appear in this tab. All objects can be cleared by selecting the broom icon.

Note that R is case-sensitive; x and X are not the same. If you try to run X, an error will be returned since no value has been named X. If the same name is used again to define a new value, R will overwrite the previous information. For example:

```{r case-sensitive}
# a semicolon can be used to separate commands
x = 10 + 5; x 
x = 30; x
```

Variables can not only contain single values, but also vectors or matrices of values. One simple way to create a vector is to use the c() command:

```{r vectors}
# define and return vectors a and b
a <- c(2, 4, 6, 8); a 
b <- 2*a; b
```

R has help pages that can sometimes be useful; they typically contain a basic description and include syntax information. To look up what a certain function does, use ? and the help page for the function will appear in the Help tab on the bottom right.

The *Files* tab shows all the files on the local computer; the `...` icon in the upper right corner opens up the directory in a separate window, which makes it easier to browse for a particular location. Save your script file via *File > Save As...* in a specific destination,then close the script file. Use the Files tab in the upper right pane to navigate to where the file is saved. Clicking on the script file reopens it in the script editor.

Bonus: the RStudio workspace can be customized easily. The panels can be rearranged by going to *Tools > Global Options > Pane Layout*. Other customization options (e.g., font size, themes, etc.) are available under *Global Options > Appearance*.

## Exercises

Show work to back up your answers for all exercises.

### Exercise 1
Download `Elevator Data for Day 1.xlsx` from the course website. Save it somewhere accessible on your computer, and remember the path to that file. Run the code below with your path to the file to import the data:

```{r import-data}
library(readxl)

# use your path-to-file in place of ~/Documents/Stat101_Labs/
my_data <- read_excel("~/Documents/Stat101_Labs/Elevator Data for Day 1.xlsx")

head(my_data)
```

How many variables does this dataset have? How many observations?

This dataset is a .xlsx file, which is the file extension for Microsoft Excel spreadsheets. Data in this format can be easily opened and edited in Excel, and it can save things like equations or formatting.

Another file type we will work with is .csv. This stands for "comma separated values", and is just text separated by commas. In this way, the data has no formatting, so it is commonly used prior to processing.

### Exercise 2

Try `?head`. What other argument could you use in the `head()` function to specify how many observations you want? Try it here.

### Exercise 3

What are the names of the variables in this dataset?

Hint: [Viewing Data](https://www.statmethods.net/input/contents.html)

### Exercise 4

Variables can have 6 different data types: character, numeric (real or decimal), integer, logical, or complex. To find this out about a variable, we use the `class()` function. To access a specific variable in a dataset, we use the `$` operator. 

More info: [Data Types](https://www.statmethods.net/input/datatypes.html)

What data type is used to record the population in 2012 in our dataset? What data type is used to record the county names?

### Exercise 5

How many elevators are in the first 6 counties in the dataset?

### Exercise 6

Use the assignment operator `<-` to assign the `ElevatorsPerThousand` column from our data to a new variable called `elevators`. Are there counties where there are more than 4 elevators per thousand? If so, how many counties?

## Acknowledgments

Data for this lab was collected by Jacob Smith and Neil Weinberg for their 2016 paper: 
Smith, Jacob. 2016. “Cherie Berry put her picture in every North Carolina elevator. Here’s 	how that affected her reelection.” Washington Post Monkey Cage Blog. https://www.washingtonpost.com/news/monkey-cage/wp/2016/04/14/cherie-berry-put-her-picture-in-every-north-carolina-elevator-heres-how-that-affected-her-reelection/ 

Sources for this lab:

- [Getting Started with R](https://github.com/OI-Biostat/oi_biostat_labs/blob/master/00_getting_started/00_intro_to_R.pdf)

- [Different Data Types](https://www.statmethods.net/input/datatypes.html)

- [Viewing Data](https://www.statmethods.net/input/contents.html)

Guidance for developing this lab was provided by Professor Kelly Moran's Summer Session I [website](https://kelrenmor.github.io/STA101-002/).
